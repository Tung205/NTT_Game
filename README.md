# Game Project: Shooting Ghost
## *1. Thông tin cá nhân*
- Họ và tên: Nguyễn Thanh Tùng
- Mã sinh viên: 23021715
- Lớp: K68-CA1
- Gmail: 23021715@vnu.edu.vn
- **Ngưỡng điểm mong muốn: 8.5 - 9.5**
## *2. Giới thiệu về game*
- Game Shooting Ghost là cuộc hành trình của chiếc tàu vũ trụ bắn phá những con ma, con quái vật, boss để giành chiến thắng.
- Người chơi cần phải điều khiển tàu chiến của mình để tránh những va chạm, đạn bắn, đồng thời bắn đạn để triệt tiêu những con quái vật đó.
## *3. Hình ảnh các nhân vật trong game*
- Hình ảnh tàu chiến: ![player_1](https://github.com/Tung205/NTT_Game/assets/158316550/6ac937b5-eef0-4ff5-ba9b-e0dc78921901)
- Hình ảnh đạn bắn của tàu chiến: ![playerbullet](https://github.com/Tung205/NTT_Game/assets/158316550/2c0f5ed6-2e2a-46e2-96a4-0644376b8c68)
- Hình ảnh quái vật nhỏ: ![enemy](https://github.com/Tung205/NTT_Game/assets/158316550/852634f9-ef17-4437-a740-7fcd7c9ae657)
- Hình ảnh đạn bắn của quái vật 1: ![bulletobject](https://github.com/Tung205/NTT_Game/assets/158316550/f45fe606-53c7-478e-a6db-1cb14ad7f6fa)

- Hình ảnh đạn bắn của quái vật 2: ![red_light](https://github.com/Tung205/NTT_Game/assets/158316550/3de828c7-1977-4344-94ed-5136b32aa171)

- Hình ảnh đạn bắn của quái vật 3: ![flash](https://github.com/Tung205/NTT_Game/assets/158316550/0b231463-385f-435c-b596-405469342420)

- Hình ảnh đạn bắn của quái vật 4: ![sun_light](https://github.com/Tung205/NTT_Game/assets/158316550/a9470ce0-9ad8-4c74-90c8-9e9eab0305af)

- Hình ảnh boss 1: ![boss1](https://github.com/Tung205/NTT_Game/assets/158316550/ef03ad1d-789d-4867-bb3c-da2b3d588bbd)

- Hình ảnh boss 2: ![boss2](https://github.com/Tung205/NTT_Game/assets/158316550/587b85f0-a888-4395-9a23-8ca31a76ef43)

- Hình ảnh boss 3: ![boss3](https://github.com/Tung205/NTT_Game/assets/158316550/e246abb0-c106-4151-bc23-428b224e1476)

- Hình ảnh boss 4: ![boss4](https://github.com/Tung205/NTT_Game/assets/158316550/9d99aa52-2054-4f31-b51f-340485eac0bd)

- Hình ảnh boss 5: ![boss5](https://github.com/Tung205/NTT_Game/assets/158316550/8433017d-cac7-4719-8541-efc7bfdf367f)

- Hình ảnh đạn phép (tính năng đạn xuyên quái vật): ![purple_light](https://github.com/Tung205/NTT_Game/assets/158316550/4ef21827-dd53-4c3c-9e3b-41385f906029)

- Hình ảnh khiên kháng phép: ![defend](https://github.com/Tung205/NTT_Game/assets/158316550/9186e90d-a81c-40d7-9d6d-54766bc5780e)

## *4. Hình ảnh và video các màn chơi trong game*
- Hình ảnh Menu:
  ![Menu1](https://github.com/Tung205/NTT_Game/assets/158316550/5bd49b1f-519d-44ad-9e2d-6ba8fe3b42be)

- Hình ảnh thắng Game:
  ![WinGame1](https://github.com/Tung205/NTT_Game/assets/158316550/ecf9bff0-88d5-4cb3-bd94-91776415977b)

- Hình ảnh thua Game:
  ![LoseGame1](https://github.com/Tung205/NTT_Game/assets/158316550/c02139da-3eb8-4f27-ae64-8d98696ccc6c)

- Hình ảnh hướng dẫn chơi game:
  ![Help1](https://github.com/Tung205/NTT_Game/assets/158316550/becd77ce-e94d-4b60-9067-53b4dd3054c2)

- Một số hình ảnh trong trò chơi:
  ![image](https://github.com/Tung205/NTT_Game/assets/158316550/913c109c-6e15-46d9-9500-fb0225c096da)
  ![image](https://github.com/Tung205/NTT_Game/assets/158316550/82ef616b-1ca4-447a-a4a1-8e26e7a9a5d2)
  ![image](https://github.com/Tung205/NTT_Game/assets/158316550/d982305a-ab3b-4330-a376-6d96eada0910)
  ![image](https://github.com/Tung205/NTT_Game/assets/158316550/4ffe5580-7aeb-4027-b3bf-6e2a5d16077e)

- Video chơi game: https://youtu.be/DuCb2KX-WQw
  - Chú ý nhỏ: Trong quá trình quay bằng phần mềm nên chất lượng hình ảnh của game không được đảm bảo, thỉnh thoảng hay bị giật khung hình, một số không thể vẽ ra hiệu ứng nổ.
    Tuy nhiên, trong game chính thức thì chất lượng game chạy mượt, tốt, các hiệu ứng vụ nổ được xử lí đầy đủ và mượt mà.
## *5. Luật chơi*
- Sử dụng các phím sau để điều khiển con tàu, bắn đạn và sử dụng một số tính năng:
  
| Phím bấm  | Chức năng |
| ------------- |:-------------:|
| Phím Up        | Nhân vật di chuyển lên    |
| Phím Down      | Nhân vật di chuyển xuống  |
| Phím Left      | Nhân vật di chuyển trái   |
| Phím Right     | Nhân vật di chuyển phải   |
| Phím A         | Tốc biến sang góc trái màn hình |
| Phím D         | Tốc biến sang góc phải màn hình |
| Phím S         | Tốc biến xuống góc dưới màn hình |
| Phím W         | Tốc biến lên góc trên màn hình |
| Phím Q         | Bắn đạn phép              |
| Phím E         | Bật khiên                 |

- Người chơi sẽ điều khiển tàu để bắn số lượng quái vật và boss trên màn hình, vượt qua mục tiêu thì sẽ qua màn chơi đó.
- Khi vào game, người chơi có 15 mạng để sử dụng cho 10 màn chơi. Nếu sử dụng hết 15 mạng mà chưa hoàn thành xong 10 màn, người chơi sẽ thua. Ngược lại, nếu sau 10 màn mà số mạng lớn hơn 0 thì người chơi sẽ thắng.


## *6. Các kĩ thuật sử dụng trong game*
- Sử dụng thư viện SDL, ngôn ngữ C++ để viết game.
- Tạo menu, hướng dẫn chơi game, xử lí thắng, thua cho game, có thể điều hướng để game chơi liên tục được.
- Game nhiều màn chơi (có 11 màn chơi). Độ khó của các màn chơi tăng dần từ dễ đến khó. 
- Tạo background trôi cho mỗi màn chơi, có 11 background trôi khác nhau cho mỗi màn chơi.
- Tạo hệ thống số đếm (từ việc cắt frame ảnh) từ 30 về 1 để tính số quái vật còn lại cần giết, số mạng còn lại của người chơi, số lần sử dụng các tính năng đặc biệt.
- Sử dụng struct, các hàm để tạo nhân vật, số đếm, cho vào list để dễ điều khiển.
- Dùng các kiến thức về con trỏ, cấp phát động để tạo những quái vật, đạn bắn.
- Hàm rand() để sinh quái vật ngẫu nhiên, đạn bắn ngẫu nhiên.
- Game có sử dụng thuật toán để hướng đạn bắn về phía tàu chiến để tạo độ khó cho game.
- Có xử lí va chạm, xử lí vụ nổ (Cắt frames liên tiếp từ 1 ảnh lớn).
- Có 7 màn chơi có boss (từ dễ đến khó), mỗi con boss được tạo ra theo 1 cách khác nhau, cách tấn công, đạn bắn khác nhau.
- Các boss có các loại đạn bắn, hướng bắn đạn khác nhau, đặc biệt boss cuối cùng có khả năng kháng phép.
- Có nhạc nền cho game, mỗi khi va chạm có âm thanh nổ.
### Một số tính năng đặc biệt cho game
- Tính năng 1: Bắn đạn phép: Đạn phép xuyên qua quái vật mà không bị delete, chỉ khi di chuyển ra ngoài màn hình mới delete. Từ đó giúp tiêu diệt được nhiều quái vật hơn trong quá trình di chuyển của đạn. Có 3 lần sử dụng loại đạn phép này.
- Tính năng 2: Tốc biến: Giúp cho tàu vũ trụ di chuyển trực tiếp ra những góc màn hình (trái, phải, trên, dưới) nhằm tránh va chạm, tránh bị rơi vào thế "gọng kìm" không có đường thoát.
- Tính năng 3: Kháng phép: Tạo 1 texture vòng tròn xung quanh bảo vệ nhân vật, giúp cho tàu vũ trụ miễn nhiễm hoàn toàn với bất kì đạn phép nào từ kẻ địch. Từ đó giúp tránh xảy ra va chạm khiến bị mất mạng. Có 5 lần sử dụng loại đạn phép này.
## *7. Những khó khăn trong quá trình làm game và kinh nghiệm rút ra*
- Khó khăn trong việc tổ chức chương trình.
  - Trong giai đoạn đầu làm game, em gặp nhiều khó khăn trong việc chia file, tổ chức file cho hợp lí. Sau nhiều lần tổ chức file thất bại, cùng với việc tham khảo code mẫu của cô thì cuối cùng em cũng đã tìm ra cách tổ chức file dễ hiểu và phù hợp.
- Khó khăn trong việc sử dụng con trỏ, cấp phát động bộ nhớ.
  - Đây là khó khăn chính trong quá trình làm game của em. Bởi vì lỗi sử dụng con trỏ này khiến em gặp khó khăn trong việc:
    - Khó khăn trong việc tạo ra đạn bắn cho nhân vật, tạo quái vật, tạo đạn bắn cho quái vật.
    - Khó khăn trong việc tạo Boss.
  - Do không được cấp phát động và hủy đúng cách, cùng với việc khi hủy con trỏ lại tiếp tục truy nhập lại vào nó gây ra "hành vi không xác định", từ đó khiến cho game hay bị sập, giật, lag, treo mà không rõ lí do. Về sau em đã cơ bản khắc phục được lỗi này.
- Khó khăn trong việc tạo font chữ TTF và cách xử lí.
  - Trong giai đoạn cuối của game, việc thêm font chữ TTF khiến cho game của em lúc chạy được, lúc thì bị sập màn hình không rõ lí do, chính vì vậy, em đã sử dụng kĩ thuật cắt ảnh frames (Phát triển từ code hoạt ảnh chuyển động Sprite của cô) để tạo ra hệ thống số đếm và xử lí logic theo hệ thống đó thay cho font chữ TTF.
- Kinh nghiệm trong việc sử dụng con trỏ, cấp phát, xóa bộ nhớ, những hành vi không xác định.
  - Qua bài tập lớn lần này, em rút ra kinh nghiệm trong quá trình sử dụng con trỏ và cấp phát động bộ nhớ, rằng khi cấp phát bộ nhớ động cho con trỏ thì cần được giải phóng đúng cách và không truy nhập lại vào vùng nhớ đã được giải phóng để gây ra "hành vi không xác định".
## *8. Nguồn tham khảo*
- Để hoàn thiện bài tập lớn lần này, em có tham khảo code mẫu của môn học để lấy làm cơ sở và phát triển cho game của mình.
## *9. Lời kết*
- Em xin cảm ơn thầy, cô đã hướng dẫn, giúp đỡ và đánh giá bài tập lớn lần này của em.

